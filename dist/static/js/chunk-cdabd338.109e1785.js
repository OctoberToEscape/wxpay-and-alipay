(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cdabd338"],{"02ab":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("8a0b")},"09fe":function(e,t,n){},"0a6e":function(e,t,n){},1146:function(e,t,n){},"16f8":function(e,t,n){"use strict";n("2cdc")},"1a04":function(e,t,n){},"21a7":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("1a04"),n("1146")},"22fa":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("e3b3"),n("bc1b")},2381:function(e,t,n){},"2bb4":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("09fe")},"2cdc":function(e,t,n){},"3a10":function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"i",(function(){return l})),n.d(t,"a",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"h",(function(){return b})),n.d(t,"g",(function(){return m}));var c=n("b775"),o=n("4328"),a=n.n(o),r=function(e){return c["a"].post("/WebOrder/goods",a.a.stringify(e)).then((function(e){return e.data}))},i=function(e){return c["a"].post("/webOrder/getCode",a.a.stringify(e)).then((function(e){return e.data}))},l=function(e){return c["a"].post("/WebOrder/addOrder",a.a.stringify(e)).then((function(e){return e}))},s=function(e){return c["a"].post("/webOrder/addOrder",a.a.stringify(e)).then((function(e){return e}))},u=function(e){return c["a"].post("/WebOrder/pay_success",a.a.stringify(e)).then((function(e){return e.data}))},d=function(e){return c["a"].post("/user/editRealname",a.a.stringify(e)).then((function(e){return e}))},f=function(e){return c["a"].post("/SmallAddress/getAddress",a.a.stringify(e)).then((function(e){return e.data}))},b=function(e){return c["a"].post("/SmallAddress/addAddress",a.a.stringify(e)).then((function(e){return e}))},m=function(e){return c["a"].post("/WebOrder/info",a.a.stringify(e)).then((function(e){return e.data}))}},"40db":function(e,t,n){},"42db":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("dc1b"),n("2381"),n("dde9")},"4b2d":function(e,t,n){},"4d75":function(e,t,n){},"4d86":function(e,t,n){"use strict";n("68ef"),n("5c56")},"5c56":function(e,t,n){},"634a":function(e,t,n){"use strict";n.r(t);var c=n("7336"),o=n("2e1b"),a=(n("22fa"),n("cdc2")),r=(n("68ef"),n("40db"),n("b730")),i=(n("cb51"),n("3743"),n("0a6e"),n("2381"),n("fe02")),l=(n("9c88"),n("6c44")),s=(n("1a04"),n("5d54")),u=(n("42db"),n("9a1c")),d=(n("89a0"),n("a136")),f=(n("4d86"),n("f23a")),b=(n("21a7"),n("aee2")),m=(n("2bb4"),n("dc94")),O=(n("02ab"),n("b0c0"),n("7a23")),p=function(e){return Object(O["pushScopeId"])("data-v-a5151c1a"),e=e(),Object(O["popScopeId"])(),e},j={class:"order-index"},h={class:"course-content mb-20"},g=p((function(){return Object(O["createElementVNode"])("div",{class:"title"},"课程详情",-1)})),v={class:"info"},y={class:"left mr-20"},w={class:"right"},V={class:"course-title"},C={class:"price"},N={class:"now-price mr-20"},B={class:"old-price"},k={class:"real-name mb-20"},_=p((function(){return Object(O["createElementVNode"])("div",{class:"name-left"},[Object(O["createElementVNode"])("div",{class:"text mb-10"},"真实姓名（必填项）"),Object(O["createElementVNode"])("div",{class:"tips"},"请填写真实姓名")],-1)})),S={class:"pay-price mb-20"},x={class:"price-old mb-25"},E=p((function(){return Object(O["createElementVNode"])("div",{class:"text"},"课程单价",-1)})),D={class:"value"},T={class:"price-new"},I=p((function(){return Object(O["createElementVNode"])("div",{class:"text"},"限时特价",-1)})),P={class:"value active"},W={class:"choose-pay mb-20"},H=p((function(){return Object(O["createElementVNode"])("div",{class:"title mb-40"},"支付方式",-1)})),A=p((function(){return Object(O["createElementVNode"])("span",{class:"ml-10"},"微信支付",-1)})),R=p((function(){return Object(O["createElementVNode"])("span",{class:"ml-10"},"支付宝支付",-1)})),J={class:"rules"},z=p((function(){return Object(O["createElementVNode"])("span",null,"已阅读并同意",-1)})),F={class:"pay-bottom-btn"},M={key:0,class:"left"},U=p((function(){return Object(O["createElementVNode"])("div",{class:"text mb-10"},"特价倒计时",-1)})),q=Object(O["createTextVNode"])("立即支付");function L(e,t,n,p,L,K){var X=m["a"],$=b["a"],G=f["a"],Q=d["a"],Y=u["a"],Z=s["a"],ee=l["a"],te=i["a"],ne=r["a"],ce=a["a"],oe=o["a"],ae=c["a"];return Object(O["openBlock"])(),Object(O["createElementBlock"])("div",j,[e.wechat?Object(O["createCommentVNode"])("",!0):(Object(O["openBlock"])(),Object(O["createBlock"])(X,{key:0,title:"确认订单","safe-area-inset-top":"",fixed:"",placeholder:""})),Object(O["createElementVNode"])("main",null,[Object(O["createElementVNode"])("div",h,[g,Object(O["createElementVNode"])("div",v,[Object(O["createElementVNode"])("div",y,[Object(O["createVNode"])($,{fit:"cover",width:"100%",height:"100%",radius:".16rem",src:e.course.bg_url},null,8,["src"])]),Object(O["createElementVNode"])("div",w,[Object(O["createElementVNode"])("div",V,Object(O["toDisplayString"])(e.course.name),1),Object(O["createElementVNode"])("div",C,[Object(O["createElementVNode"])("div",N,"￥"+Object(O["toDisplayString"])(e.course.rprice),1),Object(O["createElementVNode"])("div",B,"￥"+Object(O["toDisplayString"])(e.course.price),1)])])])]),Object(O["createElementVNode"])("div",k,[_,Object(O["createVNode"])(Q,{inset:""},{default:Object(O["withCtx"])((function(){return[Object(O["createVNode"])(G,{modelValue:e.course.real_name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.course.real_name=t}),placeholder:"请输入姓名",autocomplete:"off",maxlength:"12"},null,8,["modelValue"])]})),_:1})]),Object(O["createElementVNode"])("div",S,[Object(O["createElementVNode"])("div",x,[E,Object(O["createElementVNode"])("div",D,"￥"+Object(O["toDisplayString"])(e.course.price),1)]),Object(O["createElementVNode"])("div",T,[I,Object(O["createElementVNode"])("div",P,"￥"+Object(O["toDisplayString"])(e.course.preferential_price),1)])]),Object(O["createElementVNode"])("div",W,[H,Object(O["createVNode"])(te,{modelValue:e.payChoose,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.payChoose=t})},{default:Object(O["withCtx"])((function(){return[Object(O["createVNode"])(Q,{border:!1},{default:Object(O["withCtx"])((function(){return[Object(O["createVNode"])(ee,{clickable:"",onClick:t[1]||(t[1]=function(t){return e.payChoose="1"}),border:!1},{title:Object(O["withCtx"])((function(){return[Object(O["createVNode"])(Y,{name:"wechat-pay",size:".52rem",color:"#09bb07"}),A]})),"right-icon":Object(O["withCtx"])((function(){return[Object(O["createVNode"])(Z,{name:"1","checked-color":"#ff3737"})]})),_:1}),e.wechat?Object(O["createCommentVNode"])("",!0):(Object(O["openBlock"])(),Object(O["createBlock"])(ee,{key:0,clickable:"",onClick:t[2]||(t[2]=function(t){return e.payChoose="2"}),border:!1},{title:Object(O["withCtx"])((function(){return[Object(O["createVNode"])(Y,{name:"alipay",size:".52rem",color:"#108ee9 "}),R]})),"right-icon":Object(O["withCtx"])((function(){return[Object(O["createVNode"])(Z,{name:"2","checked-color":"#ff3737"})]})),_:1}))]})),_:1})]})),_:1},8,["modelValue"])]),Object(O["createElementVNode"])("div",J,[Object(O["createVNode"])(ne,{modelValue:e.checked,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.checked=t}),"checked-color":"#ff3737","icon-size":".32rem"},{default:Object(O["withCtx"])((function(){return[z,Object(O["createElementVNode"])("span",{class:"active",onClick:t[4]||(t[4]=Object(O["withModifiers"])((function(t){return e.ruleShow=!0}),["stop"]))},"《光环课程支付协议》")]})),_:1},8,["modelValue"])])]),Object(O["createElementVNode"])("div",F,[e.course.end_time-e.course.system_time>0?(Object(O["openBlock"])(),Object(O["createElementBlock"])("div",M,[U,Object(O["createVNode"])(ce,{time:e.course.end_time-e.course.system_time,format:"DD 天 HH : mm : ss",onFinish:e.finish},null,8,["time","onFinish"])])):Object(O["createCommentVNode"])("",!0),Object(O["createElementVNode"])("div",{class:Object(O["normalizeClass"])(e.course.end_time-e.course.system_time>0?"right-mini ":"right-lang")},[Object(O["createVNode"])(oe,{color:"#FF3737",round:"",block:"",onClick:e.handleBuy},{default:Object(O["withCtx"])((function(){return[q]})),_:1},8,["onClick"])],2)]),Object(O["createVNode"])(ae,{show:e.ruleShow,rich:e.course.agreement_content,onOnClose:t[6]||(t[6]=function(t){return e.ruleShow=!1})},null,8,["show","rich"])])}var K=n("5530"),X=n("4360"),$=n("6c02"),G=n("6c43"),Q=n("fa7c"),Y=n("23f9"),Z=n("6872"),ee=n("1fba"),te=n("e5f6"),ne=n("9b55"),ce=n("b75f"),oe=n("d243"),ae=n("5aa0"),re=n("eec6"),ie=n("5f24"),le=n("450f");const[se,ue]=Object(ee["a"])("action-bar"),de=Symbol(se),fe={safeAreaInsetBottom:te["g"]};var be=Object(O["defineComponent"])({name:se,props:fe,setup(e,{slots:t}){const{linkChildren:n}=Object(le["useChildren"])(de);return n(),()=>{var n;return Object(O["createVNode"])("div",{class:[ue(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[null==(n=t.default)?void 0:n.call(t)])}}});const me=Object(Y["a"])(be);var Oe=n("efd9"),pe=n("4e5e");const[je,he]=Object(ee["a"])("action-bar-button"),ge=Object(Q["a"])({},pe["a"],{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var ve=Object(O["defineComponent"])({name:je,props:ge,setup(e,{slots:t}){const n=Object(pe["b"])(),{parent:c,index:a}=Object(le["useParent"])(de),r=Object(O["computed"])(()=>{if(c){const e=c.children[a.value-1];return!(e&&"isButton"in e)}}),i=Object(O["computed"])(()=>{if(c){const e=c.children[a.value+1];return!(e&&"isButton"in e)}});return Object(Oe["a"])({isButton:!0}),()=>{const{type:c,icon:a,text:l,color:s,loading:u,disabled:d}=e;return Object(O["createVNode"])(o["a"],{class:he([c,{last:i.value,first:r.value}]),size:"large",type:c,icon:a,color:s,loading:u,disabled:d,onClick:n},{default:()=>[t.default?t.default():l]})}}});const ye=Object(Y["a"])(ve);const[we,Ve,Ce]=Object(ee["a"])("dialog"),Ne=Object(Q["a"])({},re["b"],{title:String,theme:String,width:te["f"],message:[String,Function],callback:Function,allowHtml:Boolean,className:te["h"],transition:Object(te["e"])("van-dialog-bounce"),messageAlign:String,closeOnPopstate:te["g"],showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:te["g"],closeOnClickOverlay:Boolean}),Be=[...re["a"],"transition","closeOnPopstate"];var ke=Object(O["defineComponent"])({name:we,props:Ne,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:t,slots:n}){const c=Object(O["ref"])(),a=Object(O["reactive"])({confirm:!1,cancel:!1}),r=e=>t("update:show",e),i=t=>{var n;r(!1),null==(n=e.callback)||n.call(e,t)},l=n=>()=>{e.show&&(t(n),e.beforeClose?(a[n]=!0,Object(ne["a"])(e.beforeClose,{args:[n],done(){i(n),a[n]=!1},canceled(){a[n]=!1}})):i(n))},s=l("cancel"),u=l("confirm"),d=Object(O["withKeys"])(n=>{var o,a;if(n.target!==(null==(a=null==(o=c.value)?void 0:o.popupRef)?void 0:a.value))return;const r={Enter:e.showConfirmButton?u:Q["d"],Escape:e.showCancelButton?s:Q["d"]};r[n.key](),t("keydown",n)},["enter","esc"]),f=()=>{const t=n.title?n.title():e.title;if(t)return Object(O["createVNode"])("div",{class:Ve("header",{isolated:!e.message&&!n.default})},[t])},b=t=>{const{message:n,allowHtml:c,messageAlign:o}=e,a=Ve("message",{"has-title":t,[o]:o}),r=Object(ce["b"])(n)?n():n;return c&&"string"===typeof r?Object(O["createVNode"])("div",{class:a,innerHTML:r},null):Object(O["createVNode"])("div",{class:a},[r])},m=()=>{if(n.default)return Object(O["createVNode"])("div",{class:Ve("content")},[n.default()]);const{title:t,message:c,allowHtml:o}=e;if(c){const e=!(!t&&!n.title);return Object(O["createVNode"])("div",{key:o?1:0,class:Ve("content",{isolated:!e})},[b(e)])}},p=()=>Object(O["createVNode"])("div",{class:[oe["d"],Ve("footer")]},[e.showCancelButton&&Object(O["createVNode"])(o["a"],{size:"large",text:e.cancelButtonText||Ce("cancel"),class:Ve("cancel"),style:{color:e.cancelButtonColor},loading:a.cancel,disabled:e.cancelButtonDisabled,onClick:s},null),e.showConfirmButton&&Object(O["createVNode"])(o["a"],{size:"large",text:e.confirmButtonText||Ce("confirm"),class:[Ve("confirm"),{[oe["b"]]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:a.confirm,disabled:e.confirmButtonDisabled,onClick:u},null)]),j=()=>Object(O["createVNode"])(me,{class:Ve("footer")},{default:()=>[e.showCancelButton&&Object(O["createVNode"])(ye,{type:"warning",text:e.cancelButtonText||Ce("cancel"),class:Ve("cancel"),color:e.cancelButtonColor,loading:a.cancel,disabled:e.cancelButtonDisabled,onClick:s},null),e.showConfirmButton&&Object(O["createVNode"])(ye,{type:"danger",text:e.confirmButtonText||Ce("confirm"),class:Ve("confirm"),color:e.confirmButtonColor,loading:a.confirm,disabled:e.confirmButtonDisabled,onClick:u},null)]}),h=()=>n.footer?n.footer():"round-button"===e.theme?j():p();return()=>{const{width:t,title:n,theme:o,message:a,className:i}=e;return Object(O["createVNode"])(ie["a"],Object(O["mergeProps"])({ref:c,role:"dialog",class:[Ve([o]),i],style:{width:Object(ae["a"])(t)},tabindex:0,"aria-labelledby":n||a,onKeydown:d,"onUpdate:show":r},Object(Q["e"])(e,Be)),{default:()=>[f(),m(),h()]})}}});let _e;function Se(){const e={setup(){const{state:e,toggle:t}=Object(Z["b"])();return()=>Object(O["createVNode"])(ke,Object(O["mergeProps"])(e,{"onUpdate:show":t}),null)}};({instance:_e}=Object(Z["a"])(e))}function xe(e){return Q["c"]?new Promise((t,n)=>{_e||Se(),_e.open(Object(Q["a"])({},xe.currentOptions,e,{callback:e=>{("confirm"===e?t:n)(e)}}))}):Promise.resolve()}xe.defaultOptions={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1},xe.currentOptions=Object(Q["a"])({},xe.defaultOptions),xe.alert=xe,xe.confirm=e=>xe(Object(Q["a"])({showCancelButton:!0},e)),xe.close=()=>{_e&&_e.toggle(!1)},xe.setDefaultOptions=e=>{Object(Q["a"])(xe.currentOptions,e)},xe.resetDefaultOptions=()=>{xe.currentOptions=Object(Q["a"])({},xe.defaultOptions)},xe.Component=Object(Y["a"])(ke),xe.install=e=>{e.use(xe.Component),e.config.globalProperties.$dialog=xe};var Ee=n("3a10"),De=Object(O["defineComponent"])({name:"order-index",components:{rulePopup:c["a"]},setup:function(){var e=Object($["d"])(),t=Object($["c"])(),n=Object(O["ref"])(!1),c=Object(O["ref"])(!1),o=Object(O["ref"])("1"),a=Object(O["reactive"])({course:{}}),r=function(){var e=t.query.channel_id;Object(Ee["e"])({channel_id:e,uid:X["a"].state.userInfo?X["a"].state.userInfo.id:""}).then((function(e){e&&(a.course=e)}))},i=function(){var t=localStorage.userInfo;if(t){if(!a.course.real_name)return void Object(G["a"])("请填写真实姓名");if(!n.value)return void Object(G["a"])("请同意支付协议");"1"===o.value?l():f()}else e.push({name:"login"})},l=function(){b.value?localStorage.OPENID?console.log("拿jssdk参数 吊起微信支付jssdk"):Object(Ee["c"])({redirect_url:encodeURIComponent(window.location.href)}).then((function(e){window.location.href=e.authurl})):s()},s=function(){Object(Ee["i"])({channel_id:t.query.channel_id,uid:X["a"].state.userInfo.id,pay_method:2,if_wechat_browser:0,real_name:a.course.real_name,redirect_url:window.location.href}).then((function(e){1===e.status&&(window.location.href=e.data.mweb_url)}))},u=function(e){var t=e.appId,n=e.timeStamp,c=e.nonceStr,o=e.paySign,a={appId:t,timeStamp:n,nonceStr:c,package:e.package,signType:"MD5",paySign:o};"undifine"==typeof WeixinJSBbridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",d(a),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",d(a)),document.attachEvent("OnWeixinJSBridgeReady",d(a))):d(a)},d=function(e){WeixinJSBridge.invoke("getBrandWCPayRequest",e,(function(e){console.log(e),"get_brand_wcpay_request:ok"==e.err_msg?console.log("支付成功"):console.log("失败")}))},f=function(){Object(Ee["a"])({channel_id:t.query.channel_id,uid:X["a"].state.userInfo.id,pay_method:1,real_name:a.course.real_name,redirect_url:"".concat(window.origin,"/aura-h5/pay-success?order_num=")}).then((function(e){if("string"===typeof e){var t=document.createElement("div");t.innerHTML=e,document.body.appendChild(t),document.forms[0].submit()}}))},b=Object(O["computed"])((function(){return X["a"].state.isWechat})),m=function(){return r()};return Object(O["onMounted"])((function(){r(),"1"===t.query.isAlert&&xe.confirm({title:"提示",message:"请确认微信支付是否已经完成",confirmButtonText:"已完成支付",cancelButtonText:"重新支付"}).then((function(){console.log("支付成功,跳转支付成功")})).catch((function(){console.log("支付失败,重新支付"),s()}))})),Object(K["a"])(Object(K["a"])({checked:n,ruleShow:c,payChoose:o,wechat:b},Object(O["toRefs"])(a)),{},{finish:m,handleBuy:i,wechatPay:l,getWxH5:s,getWxJSSDK:u,onBridgeReady:d,alipay:f})}}),Te=(n("bda5"),n("6b0d")),Ie=n.n(Te);const Pe=Ie()(De,[["render",L],["__scopeId","data-v-a5151c1a"]]);t["default"]=Pe},7336:function(e,t,n){"use strict";var c=n("5f24"),o=(n("ac6b"),n("2e1b")),a=(n("22fa"),n("7a23")),r={class:"modify-name-content"},i=["innerHTML"],l={class:"handle-btn"},s=Object(a["createTextVNode"])("确定");function u(e,t,n,u,d,f){var b=o["a"],m=c["a"];return Object(a["openBlock"])(),Object(a["createBlock"])(m,{class:"modify-name",show:e.dialog,"onUpdate:show":t[0]||(t[0]=function(t){return e.dialog=t}),round:"","close-on-click-overlay":!1,onClose:e.close},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("div",{class:"desc",innerHTML:e.rich},null,8,i),Object(a["createElementVNode"])("div",l,[Object(a["createVNode"])(b,{plain:"",type:"primary",onClick:e.close},{default:Object(a["withCtx"])((function(){return[s]})),_:1},8,["onClick"])])])]})),_:1},8,["show","onClose"])}var d=Object(a["defineComponent"])({name:"modify-name-popup",props:{show:{type:Boolean,default:function(){return!1}},rich:{type:String,default:function(){return""}}},setup:function(e,t){var n=t.emit,c=Object(a["ref"])(!1),o=function(){return n("onClose")};return Object(a["watchEffect"])((function(){c.value=e.show})),{dialog:c,close:o}}}),f=(n("16f8"),n("6b0d")),b=n.n(f);const m=b()(d,[["render",u],["__scopeId","data-v-eecd9488"]]);t["a"]=m},"89a0":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743")},"8a0b":function(e,t,n){},"9c88":function(e,t,n){"use strict";n("68ef"),n("dc1b")},a71a:function(e,t,n){},ac6b:function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("a71a"),n("4d75")},b0c0:function(e,t,n){var c=n("83ab"),o=n("5e77").EXISTS,a=n("e330"),r=n("9bf2").f,i=Function.prototype,l=a(i.toString),s=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=a(s.exec),d="name";c&&!o&&r(i,d,{configurable:!0,get:function(){try{return u(s,l(this))[1]}catch(e){return""}}})},bc1b:function(e,t,n){},bda5:function(e,t,n){"use strict";n("4b2d")},dc1b:function(e,t,n){},dde9:function(e,t,n){},e3b3:function(e,t,n){}}]);